<div class="w-full mobile-safe relative">
  <div class="bg-gradient-to-r from-indigo-600 to-blue-500 rounded-lg shadow-md overflow-hidden mb-6">
    <div class="px-6 py-4 border-b border-white border-opacity-20">
      <h2 class="text-2xl font-bold text-white flex items-center">
        <i class="fas fa-edit mr-3"></i>
        {{ 'editServiceRequest' | i18n }}
      </h2>
      <p class="text-white text-sm mt-1">
        {{ 'fillFormToEditRequest' | i18n }}
      </p>
    </div>
  </div>

  @if (loading) {
    <div class="text-center text-gray-500">{{ 'loading' | i18n }}</div>
  } @else if (error) {
    <div class="text-center text-red-600">{{ error }}</div>
  } @else if (request) {
    <form #editForm="ngForm" (ngSubmit)="save()" class="p-6 bg-white rounded-lg shadow">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
        <div>
          <label for="edit-street" class="flex items-center text-sm font-semibold text-gray-700 mb-2">
            <i class="fas fa-road text-indigo-500 mr-2 text-xs"></i>
            {{ 'street' | i18n }}
          </label>
          <input id="edit-street" type="text" name="street" [(ngModel)]="request.street" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all" />
        </div>
        <div>
          <label for="edit-city" class="flex items-center text-sm font-semibold text-gray-700 mb-2">
            <i class="fas fa-city text-indigo-500 mr-2 text-xs"></i>
            {{ 'city' | i18n }}
          </label>
          <input id="edit-city" type="text" name="city" [(ngModel)]="request.city" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all" />
        </div>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
        <div>
          <label for="edit-state" class="flex items-center text-sm font-semibold text-gray-700 mb-2">
            <i class="fas fa-map-marker-alt text-indigo-500 mr-2 text-xs"></i>
            {{ 'state' | i18n }}
          </label>
          <input id="edit-state" type="text" name="state" [(ngModel)]="request.state" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all" />
        </div>
        <div>
          <label for="edit-zip-code" class="flex items-center text-sm font-semibold text-gray-700 mb-2">
            <i class="fas fa-mail-bulk text-indigo-500 mr-2 text-xs"></i>
            {{ 'zipCode' | i18n }}
          </label>
          <input id="edit-zip-code" type="text" name="zip_code" [(ngModel)]="request.zip_code" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all" />
        </div>
      </div>
      <div class="mb-4">
        <label for="edit-description" class="flex items-center text-sm font-semibold text-gray-700 mb-2">
          <i class="fas fa-align-left text-indigo-500 mr-2 text-xs"></i>
          {{ 'description' | i18n }}
        </label>
        <textarea id="edit-description" name="description" [(ngModel)]="request.description" rows="2" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all"></textarea>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
        <div>
          <label for="edit-scheduled-date" class="flex items-center text-sm font-semibold text-gray-700 mb-2">
            <i class="fas fa-calendar-alt text-indigo-500 mr-2 text-xs"></i>
            {{ 'scheduledDate' | i18n }}
          </label>
          <input id="edit-scheduled-date" type="datetime-local" name="scheduled_start_datetime" [(ngModel)]="request.scheduled_start_datetime" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all" />
        </div>
        <div>
          <label for="edit-estimated-duration" class="flex items-center text-sm font-semibold text-gray-700 mb-2">
            <i class="fas fa-clock text-indigo-500 mr-2 text-xs"></i>
            {{ 'estimatedDuration' | i18n }}
          </label>
          <input id="edit-estimated-duration" type="number" name="estimated_duration_minutes" [(ngModel)]="request.estimated_duration_minutes" min="0" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all" />
        </div>
      </div>
      <div class="mb-4">
        <label for="edit-admin-notes" class="flex items-center text-sm font-semibold text-gray-700 mb-2">
          <i class="fas fa-sticky-note text-indigo-500 mr-2 text-xs"></i>
          {{ 'adminNotes' | i18n }}
        </label>
        <textarea id="edit-admin-notes" name="admin_notes" [(ngModel)]="request.admin_notes" rows="2" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all"></textarea>
      </div>
      <div class="flex gap-3 mt-6">
        <button type="button" (click)="cancel()" class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
          {{ 'cancel' | i18n }}
        </button>
        <button type="submit" class="flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
          <i class="fas fa-save mr-2"></i>
          {{ 'save' | i18n }}
        </button>
      </div>
    </form>
  }
</div>
