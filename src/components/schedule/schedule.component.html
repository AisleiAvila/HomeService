<div
  class="schedule-container h-full flex flex-col bg-gray-50 rounded-lg shadow-sm"
>
  <!-- Título principal do dashboard -->
  <div class="p-4 border-b border-gray-200 bg-white">
    <h1 [ngClass]="fontHeading">{{ "scheduleTitle" | i18n }}</h1>
    <div
      class="flex flex-col sm:flex-row sm:items-center sm:justify-between mt-2"
    >
      <button
        (click)="toggleFilterVisibility()"
        class="relative flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
      >
        <i class="fas fa-filter w-4 h-4 mr-2"></i>
        <span [ngClass]="fontText">{{ "filter" | i18n }}</span>
        @if (activeFilterCount() > 0) {
        <span
          class="absolute -top-2 -right-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full"
          >{{ activeFilterCount() }}</span
        >
        }
      </button>

      <div class="flex gap-2 mt-3 sm:mt-0">
        <button
          (click)="selectAllStatuses()"
          class="px-3 py-1 text-xs font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors"
          [ngClass]="fontSmall"
        >
          {{ "selectAll" | i18n }}
        </button>
        <button
          (click)="deselectAllStatuses()"
          class="px-3 py-1 text-xs font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors"
          [ngClass]="fontSmall"
        >
          {{ "deselectAll" | i18n }}
        </button>
      </div>
    </div>

    <!-- Painel de Filtro Recolhível -->
    @if (isFilterVisible()) {
    <div
      class="mt-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 pt-4 border-t border-gray-200"
    >
      @for (status of statusLegend(); track status.name) {
      <label
        class="flex items-center p-2 rounded-lg cursor-pointer transition-colors hover:bg-gray-100"
        [class.bg-gray-50]="!isStatusVisible(status.name)"
      >
        <input
          type="checkbox"
          class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"
          [checked]="isStatusVisible(status.name)"
          (change)="toggleStatusFilter(status.name)"
        />
        <span
          class="w-3 h-3 rounded-full ml-3"
          [style.backgroundColor]="status.color"
        ></span>
        <span
          class="ml-2 text-sm font-medium text-gray-700"
          [ngClass]="fontText"
          >{{ getStatusTranslation(status.name) }}</span
        >
      </label>
      }
    </div>
    }
  </div>
  <div class="flex-1 p-4 bg-white rounded-b-lg">
    <full-calendar
      #calendar
      [options]="calendarOptions"
      class="h-full"
    ></full-calendar>
  </div>
</div>
