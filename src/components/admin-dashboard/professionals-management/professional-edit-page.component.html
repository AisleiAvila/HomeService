<!-- Tela de Edição de Profissional -->
@if (!loading()) {
  <div class="min-h-screen bg-linear-to-br from-gray-50 dark:from-gray-900 via-brand-primary-50 dark:via-gray-800 to-brand-primary-100 dark:to-gray-900">
    <!-- Header -->
    <div class="bg-linear-to-r from-brand-primary-600 to-brand-primary-500 text-white shadow-lg">
      <div class="max-w-6xl mx-auto px-6 py-4">
        <div class="flex items-center justify-between">
          <div>
            <h2 class="text-2xl font-bold text-white flex items-center">
              <i class="fas fa-user-edit mr-3"></i>
              {{ "editProfessional" | i18n }}
            </h2>
            <p class="text-brand-primary-100 text-sm mt-1">
              {{ name() }}
            </p>
          </div>
          <button (click)="cancel()"
            class="inline-flex items-center gap-2 px-4 py-2 text-sm font-semibold text-brand-primary-600 bg-white rounded-lg hover:bg-brand-primary-50 transition-all shadow-md hover:shadow-lg">
            <i class="fas fa-arrow-left"></i>
            {{ "backToList" | i18n }}
          </button>
        </div>
      </div>
    </div>
    <!-- Formulário -->
    <div class="max-w-6xl mx-auto py-10 px-6">
      <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden">
        <!-- Seção de Informações Básicas -->
        <div class="bg-linear-to-r from-brand-primary-50 dark:from-gray-700 to-brand-primary-50 dark:to-gray-700 px-8 py-6 border-b border-brand-primary-100 dark:border-gray-600">
          <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-3">
            <i class="fas fa-info-circle text-brand-primary-600"></i>
            Informações Básicas
          </h2>
        </div>
        <div class="p-8 space-y-8">
          <!-- Grid para Nome, Email e Telefone -->
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Nome -->
            <div>
              <label for="name" class="block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2">
                <div class="bg-brand-primary-100 dark:bg-brand-primary-900 p-2 rounded-lg">
                  <i class="fas fa-user text-brand-primary-600 dark:text-brand-primary-400"></i>
                </div>
                {{ "name" | i18n }}
              </label>
              <input
                id="name"
                type="text"
                [ngModel]="name()"
                (ngModelChange)="name.set($event)"
                class="w-full px-4 py-3.5 border-2 border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-brand-primary-500 focus:border-brand-primary-500 transition-all hover:border-brand-primary-300 dark:hover:border-brand-primary-600 bg-gray-50 dark:bg-gray-700 focus:bg-white dark:focus:bg-gray-600 text-gray-900 dark:text-gray-100"
                placeholder="Digite o nome completo" />
              </div>
              <!-- Email -->
              <div>
                <label for="email" class="block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2">
                  <div class="bg-brand-primary-100 dark:bg-brand-primary-900 p-2 rounded-lg">
                    <i class="fas fa-envelope text-brand-primary-600 dark:text-brand-primary-400"></i>
                  </div>
                  {{ "email" | i18n }}
                </label>
                <input
                  id="email"
                  type="email"
                  [ngModel]="email()"
                  (ngModelChange)="email.set($event)"
                  class="w-full px-4 py-3.5 border-2 border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-brand-primary-500 focus:border-brand-primary-500 transition-all hover:border-brand-primary-300 dark:hover:border-brand-primary-600 bg-gray-50 dark:bg-gray-700 focus:bg-white dark:focus:bg-gray-600 text-gray-900 dark:text-gray-100"
                  placeholder="email@exemplo.com" />
                </div>
                <!-- Telefone -->
                <div>
                  <label for="phone" class="block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2">
                    <div class="bg-brand-primary-100 dark:bg-brand-primary-900 p-2 rounded-lg">
                      <i class="fas fa-phone text-brand-primary-600 dark:text-brand-primary-400"></i>
                    </div>
                    {{ "phone" | i18n }}
                  </label>
                  <input
                    id="phone"
                    type="tel"
                    [ngModel]="phone()"
                    (ngModelChange)="phone.set($event)"
                    class="w-full px-4 py-3.5 border-2 border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-brand-primary-500 focus:border-brand-primary-500 transition-all hover:border-brand-primary-300 dark:hover:border-brand-primary-600 bg-gray-50 dark:bg-gray-700 focus:bg-white dark:focus:bg-gray-600 text-gray-900 dark:text-gray-100"
                    placeholder="+351 912 345 678" />
                  </div>
                </div>
                <!-- Seção de Especialidades -->
                <div class="bg-linear-to-br from-brand-primary-50 dark:from-gray-700 to-brand-primary-100 dark:to-gray-800 rounded-2xl p-6 border-2 border-brand-primary-100 dark:border-gray-600">
                  <div class="block text-lg font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-3">
                    <div class="bg-brand-primary-600 dark:bg-brand-primary-700 p-3 rounded-xl shadow-lg">
                      <i class="fas fa-tools text-white text-xl"></i>
                    </div>
                    {{ "specialties" | i18n }}
                    <span class="ml-auto text-sm font-normal text-brand-primary-600 dark:text-brand-primary-400">
                      {{ specialties().length }} selecionada(s)
                    </span>
                  </div>
                  @if(categories().length > 0) {
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mt-4">
                      @for(cat of categories(); track cat.id) {
                        <label class="flex items-center gap-3 cursor-pointer p-4 bg-white dark:bg-gray-600 hover:bg-brand-primary-50 dark:hover:bg-gray-700 rounded-xl transition-all border-2 border-transparent hover:border-brand-primary-300 dark:hover:border-brand-primary-600 shadow-sm hover:shadow-md group">
                          <input
                            type="checkbox"
                            [checked]="isSpecialtySelected(cat)"
                            (change)="onSpecialtyToggle(cat, $event)"
                            class="form-checkbox h-5 w-5 text-brand-primary-600 dark:text-brand-primary-400 rounded-lg focus:ring-2 focus:ring-brand-primary-500 transition-all border-2 border-gray-300 dark:border-gray-500 dark:bg-gray-600" />
                            <span class="text-sm text-gray-700 dark:text-gray-200 font-semibold group-hover:text-brand-primary-700 dark:group-hover:text-brand-primary-300 transition-colors">{{ cat.name }}</span>
                          </label>
                        }
                      </div>
                    } @else {
                      <div class="bg-yellow-50 dark:bg-yellow-900 border-2 border-yellow-200 dark:border-yellow-700 rounded-xl p-6 text-center">
                        <i class="fas fa-exclamation-triangle text-yellow-600 dark:text-yellow-400 text-3xl mb-3"></i>
                        <p class="text-yellow-800 dark:text-yellow-200 font-semibold">Nenhuma categoria disponível</p>
                        <p class="text-yellow-600 dark:text-yellow-300 text-sm mt-2">Total de categorias: {{ categories().length }}</p>
                      </div>
                    }
                  </div>
                  <!-- Vínculo com Natan Construtora -->
                  <div class="bg-linear-to-r from-brand-primary-50 dark:from-gray-700 to-brand-primary-50 dark:to-gray-700 rounded-2xl p-6 border-2 border-brand-primary-200 dark:border-gray-600 shadow-sm">
                    <label class="flex items-center gap-4 cursor-pointer group">
                      <div class="relative">
                        <input
                          type="checkbox"
                          [checked]="isNatanEmployee()"
                          (change)="isNatanEmployee.set($any($event.target).checked)"
                          class="form-checkbox h-7 w-7 text-brand-primary-600 dark:text-brand-primary-400 rounded-lg focus:ring-2 focus:ring-brand-primary-500 border-2 border-gray-400 dark:border-gray-500 transition-all dark:bg-gray-600"
                          aria-label="{{ 'isNatanEmployee' | i18n }}" />
                        </div>
                        <div class="flex-1">
                          <div class="flex items-center gap-2 mb-1">
                            <i class="fas fa-building text-brand-primary-600 dark:text-brand-primary-400 text-lg"></i>
                            <span class="text-lg text-gray-800 dark:text-gray-100 font-bold group-hover:text-brand-primary-700 dark:group-hover:text-brand-primary-300 transition-colors">
                              {{ "isNatanEmployee" | i18n }}
                            </span>
                          </div>
                          <p class="text-sm text-gray-600 dark:text-gray-400 font-medium">
                            <i [class]="isNatanEmployee() ? 'fas fa-check-circle text-green-600 dark:text-green-400' : 'fas fa-times-circle text-gray-400 dark:text-gray-600'"></i>
                            {{ isNatanEmployee() ? ("natanEmployeeYes" | i18n) : ("natanEmployeeNo" | i18n) }}
                          </p>
                        </div>
                      </label>
                    </div>
                    <!-- Botões de Ação -->
                    <div class="flex flex-col sm:flex-row justify-between items-center gap-4 pt-8 border-t-2 border-gray-200 dark:border-gray-700 mt-8">
                      <div class="text-sm text-gray-600 dark:text-gray-400">
                        <i class="fas fa-info-circle mr-2 text-brand-primary-600 dark:text-brand-primary-400"></i>
                        Certifique-se de salvar as alterações
                      </div>
                      <div class="flex gap-4 w-full sm:w-auto">
                        <button
                          (click)="cancel()"
                          class="flex-1 sm:flex-none px-8 py-4 text-base font-bold rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-all border-2 border-gray-300 dark:border-gray-600 shadow-md hover:shadow-lg transform hover:scale-105">
                          <i class="fas fa-times mr-2"></i>{{ "cancel" | i18n }}
                        </button>
                        <button
                          (click)="save()"
                          class="flex-1 sm:flex-none px-12 py-4 text-base font-bold rounded-xl text-white bg-linear-to-r from-brand-primary-600 to-brand-primary-500 hover:from-brand-primary-700 hover:to-brand-primary-600 transition-all shadow-xl hover:shadow-2xl transform hover:scale-105">
                          <i class="fas fa-save mr-2"></i>{{ "save" | i18n }}
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          }

          <!-- Estado de Carregamento -->
          @if (loading()) {
            <div class="min-h-screen bg-linear-to-br from-gray-50 dark:from-gray-900 via-brand-primary-50 dark:via-gray-800 to-brand-primary-100 dark:to-gray-900 flex items-center justify-center">
              <div class="text-center bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-12">
                <div class="relative inline-block mb-6">
                  <i class="fas fa-spinner fa-spin text-6xl text-brand-primary-600 dark:text-brand-primary-400"></i>
                  <div class="absolute inset-0 bg-brand-primary-200 dark:bg-brand-primary-900 blur-2xl opacity-50 animate-pulse"></div>
                </div>
                <h3 class="text-2xl font-bold text-gray-800 dark:text-gray-100 mb-2">Carregando dados</h3>
                <p class="text-gray-600 dark:text-gray-400">Aguarde um momento...</p>
              </div>
            </div>
          }

