
<div class="fade-in">
  <h1 class="text-3xl font-bold text-gray-800">Welcome back, {{ user().name }}!</h1>
  <p class="mt-2 text-gray-600">Here's a summary of your activity.</p>

  <!-- Stats Cards -->
  <div class="mt-8 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
    @if(user().role === 'client') {
      <!-- Client Stats -->
      <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-blue-500">
        <h2 class="text-sm font-medium text-gray-500">Active Services</h2>
        <p class="mt-1 text-3xl font-semibold text-gray-900">{{ pendingServices().length }}</p>
      </div>
      <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-green-500">
        <h2 class="text-sm font-medium text-gray-500">Completed Services</h2>
        <p class="mt-1 text-3xl font-semibold text-gray-900">{{ completedServicesCount() }}</p>
      </div>
       <div class="bg-indigo-600 hover:bg-indigo-700 text-white p-6 rounded-lg shadow-md flex flex-col items-center justify-center cursor-pointer" (click)="newRequest.emit()">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
        <h2 class="mt-2 text-lg font-semibold">New Service Request</h2>
      </div>
    } @else {
      <!-- Professional Stats -->
      <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-orange-500">
        <h2 class="text-sm font-medium text-gray-500">Open Jobs Available</h2>
        <p class="mt-1 text-3xl font-semibold text-gray-900">{{ openJobsCount() }}</p>
      </div>
       <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-blue-500">
        <h2 class="text-sm font-medium text-gray-500">Assigned Jobs</h2>
        <p class="mt-1 text-3xl font-semibold text-gray-900">{{ pendingServices().length }}</p>
      </div>
      <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-green-500">
        <h2 class="text-sm font-medium text-gray-500">Completed Jobs</h2>
        <p class="mt-1 text-3xl font-semibold text-gray-900">{{ completedServicesCount() }}</p>
      </div>
    }
  </div>

  <!-- Upcoming Service Section -->
  <div class="mt-10 bg-white p-6 rounded-lg shadow-md">
    <h2 class="text-xl font-bold text-gray-800">Upcoming Service</h2>
    @if (upcomingService(); as service) {
      <div class="mt-4 border-t pt-4">
        <div class="flex items-center justify-between">
          <div>
            <h3 class="text-lg font-semibold text-indigo-600">{{ service.title }}</h3>
            <p class="text-sm text-gray-500">{{ service.category }}</p>
          </div>
          <div class="text-right">
             <p class="text-lg font-medium text-gray-800">{{ service.scheduledDate | date:'fullDate' }}</p>
             <p class="text-md text-gray-600">{{ service.scheduledDate | date:'shortTime' }}</p>
          </div>
        </div>
        <p class="mt-3 text-gray-700">{{ service.description }}</p>
        <div class="mt-4 flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" /></svg>
          <span class="ml-2 text-gray-600">{{ service.address }}</span>
        </div>
        @if (user().role === 'client' && getProfessional(service.professionalId); as pro) {
           <div class="mt-4 flex items-center p-3 bg-gray-50 rounded-lg">
                <img [src]="pro.avatarUrl" alt="Professional" class="h-10 w-10 rounded-full">
                <div class="ml-3">
                    <p class="text-sm font-medium text-gray-900">{{ pro.name }}</p>
                    <p class="text-sm text-gray-500">Your assigned professional</p>
                </div>
            </div>
        }
      </div>
    } @else {
      <p class="mt-4 text-gray-500">You have no upcoming scheduled services.</p>
    }
  </div>
</div>
